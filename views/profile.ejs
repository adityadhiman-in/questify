<%- include("partials/header.ejs") %>
<!-- Include the header -->

<main class="profile-container">
  <h2>Your Profile</h2>
  <section class="profile-section">
    <div class="profile-card">
      <h2>Welcome, <%= user.username %>!</h2>
      <p><strong>Email:</strong> <%= user.email %></p>
      <p>
        Manage your account and settings from here. You can also view your
        activity and posts.
      </p>

      <div class="profile-actions">
        <a href="/users/edit-profile" class="btn btn-primary">Edit Profile</a>
        <a href="/users/logout" class="btn btn-danger">Logout</a>
      </div>
    </div>
  </section>

  <!-- Section to display the user's posts -->
  <section class="user-posts-section">
    <h3>Your Posts</h3>
    <div class="posts-container">
      <% if (posts.length > 0) { %> <% posts.forEach(post => { %>
      <div class="post-card">
        <h4><%= post.title %></h4>
        <p><%= post.body %></p>
        <form action="/posts/<%= post._id %>/delete" method="POST">
          <button type="submit" class="btn btn-danger">Delete</button>
        </form>
      </div>
      <% }) %> <% } else { %>
      <p>You haven't created any posts yet.</p>
      <% } %>
    </div>
  </section>
</main>

<%- include("partials/loggedInFooter.ejs") %>
